import{r,m as w,u as _,j as e,Q as f}from"./index-2b00a054.js";import{d as k}from"./GridView-85d728d6.js";import"./index.esm-a80e06b2.js";import{u as A,C as c}from"./index.esm-322da860.js";import{d as L}from"./Add-84462153.js";import{S as i}from"./react-select.esm-a86401bf.js";import{c as u}from"./canboApi-c8a721f9.js";import{B}from"./Button-c283a03a.js";import"./createSvgIcon-46c59fe3.js";import"./ButtonBase-ca61bcf9.js";const I=()=>{const[b,p]=r.useState([]),[N,g]=r.useState([]);r.useState(!1);const[v,j]=r.useState([]),[y,C]=r.useState([]),[K,o]=w();_(),r.useState("");const[S,q]=r.useState("Nam"),[D,T]=r.useState(!0),{register:a,handleSubmit:P,control:t,resetField:d,watch:x,setValue:m,formState:{errors:O}}=A({defaultValues:{hoten:"",gioitinh:{value:"Nam",label:"Nam"},CCCD:"033",quequan:"",sohieuCAND:"",dangvien:{label:"Có",value:!0},lyluanchinhtri:{value:"Trung cấp",label:"Trung cấp"},trinhdo:{value:"Đại học",label:"Đại học"}}});r.useEffect(()=>{(async()=>{let n=x("donvi");if(m("doi",""),n)try{let l=await u.getDoiWhenDonviChange({id_donvi:n.value});g(l.data.map(h=>({value:h._id,label:h.tendoi})))}catch(l){console.log(l.message)}})()},[x("donvi")]),r.useEffect(()=>{(async()=>{try{let n=await u.getDataForAddPerson();p(n.data.donvis.map(l=>({value:l._id,label:l.tendonvi}))),C(n.data.chucvus.map(l=>({value:l._id,label:l.chucvu}))),j(n.data.bachams.map(l=>({value:l._id,label:l.bacham})))}catch(n){console.log(n.message)}})()},[]);const V=async s=>{let n={...s};o(!0);try{let l=await u.addPerson(n);setTimeout(()=>{o(!1)},400),d("hoten"),d("CCCD"),d("quequan"),d("sohieuCAND"),f.success(l.data.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"})}catch(l){f.error(l.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}),o(!1)}};return e.jsxs("div",{className:"pr-2","data-aos":"fade-left","data-aos-once":"true",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(k,{color:"primary",fontSize:"large"}),e.jsx("h4",{className:"font-bold text-gray-800 text-lg",children:"Thêm mới đoàn viên"})]}),e.jsx("h3",{className:"my-2 text-red-700 font-bold ml-2 mb-4",children:"Lưu ý: Tạo mới đoàn viên chỉ được thực hiện đối với đoàn viên nhận công tác tại Công an tỉnh lần đầu tiên, cần kiểm tra kỹ lại xem trong hệ thống có dữ liệu của đoàn viên đó chưa để tránh việc trùng lặp dữ liệu."}),e.jsxs("form",{className:"mt-2 mx-8",onSubmit:P(V),children:[e.jsxs("div",{className:"flex space-x-2 items-start",children:[e.jsx("img",{src:S==="Nam"?"/namcongan.png":"/anhnucongan.png",alt:"avatar",className:"w-auto h-full"}),e.jsxs("div",{className:"flex flex-wrap xl:flex-row flex-col flex-1 bg-slate-300 p-2 rounded-md",children:[e.jsxs("div",{className:"flex-col flex md:basis-1/3 flex-1 px-1",children:[e.jsxs("label",{className:"underline font-semibold",children:[e.jsx("span",{className:"text-red-600 font-semibold",children:" (*)"})," Họ và tên: "]}),e.jsx("input",{...a("hoten",{required:!0}),type:"text",className:`outline-none my-4 border rounded-md p-2 border-neutral-600\r
                  focus:ring-2 focus:border-blue-400`})]}),e.jsxs("div",{className:"flex-col flex md:basis-1/3 flex-1 px-1",children:[e.jsxs("label",{className:"underline font-semibold",children:[e.jsx("span",{className:"text-red-600 font-semibold",children:" (*)"})," Số CCCD: "]}),e.jsx("input",{...a("CCCD",{required:!0}),type:"number",maxLength:12,minLength:12,className:`outline-none my-4 border rounded-md p-2 border-neutral-600\r
                  focus:ring-2 focus:border-blue-400`})]}),e.jsxs("div",{className:"flex-col flex flex-1 md:basis-1/6 px-1",children:[e.jsxs("label",{className:"underline font-semibold",children:[e.jsx("span",{className:"text-red-600 font-semibold",children:" (*)"})," Giới tính:"]}),e.jsx(i,{...a("gioitinh"),name:"gioitinh",options:[{value:"Nam",label:"Nam"},{value:"Nữ",label:"Nữ"}],className:"basic-multi-select my-4 p-1",classNamePrefix:"select",defaultValue:{value:"Nam",label:"Nam"},onChange:s=>{q(s.value),m("gioitinh",s)}})]}),e.jsxs("div",{className:"flex-col flex md:basis-1/6 flex-1 px-1",children:[e.jsxs("label",{className:"underline font-semibold",children:[e.jsx("span",{className:"text-red-600 font-semibold",children:" (*)"})," Ngày sinh: "]}),e.jsx("input",{...a("ngaysinh"),placeholder:"dd-mm-yyyy",type:"date",className:`outline-none my-4 border rounded-md p-2 border-neutral-600\r
                  focus:ring-2 focus:border-blue-400`,required:!0})]}),e.jsxs("div",{className:"flex-col flex md:basis-1/3 flex-1 px-1",children:[e.jsx("label",{className:"underline font-semibold",children:" Quê quán: "}),e.jsx("input",{...a("quequan"),type:"text",className:`outline-none my-4 border rounded-md p-2 border-neutral-600\r
                  focus:ring-2 focus:border-blue-400`})]}),e.jsxs("div",{className:"flex-col flex md:basis-1/6 flex-1 px-1",children:[e.jsx("label",{className:"underline font-semibold",children:" Số hiệu CAND: "}),e.jsx("input",{...a("sohieuCAND"),type:"text",className:`outline-none my-4 border rounded-md p-2 border-neutral-600\r
                  focus:ring-2 focus:border-blue-400`})]}),e.jsxs("div",{className:"flex-col flex flex-1 md:basis-1/6 px-1",children:[e.jsx("label",{className:"underline font-semibold",children:"Trình độ học vấn:"}),e.jsx(c,{control:t,name:"trinhdo",render:({field:s})=>e.jsx(i,{options:[{value:"Đại học",label:"Đại học"},{value:"Cao đẳng",label:"Cao đẳng"},{value:"Trung cấp",label:"Trung cấp"},{value:"Sơ cấp",label:"Sơ cấp"},{value:"Khác",label:"Khác"}],className:"basic-multi-select my-4 p-1",classNamePrefix:"select",defaultValue:{value:"Đại học",label:"Đại học"},...s})})]}),e.jsxs("div",{className:"flex-col flex flex-1 md:basis-1/6 px-1",children:[e.jsx("label",{className:"underline font-semibold",children:"Lý luận chính trị:"}),e.jsx(c,{control:t,name:"lyluanchinhtri",render:({field:s})=>e.jsx(i,{options:[{value:"Trung cấp",label:"Trung cấp"},{value:"Sơ cấp",label:"Sơ cấp"},{value:"Cao cấp",label:"Cao cấp"},{value:"Khác",label:"Khác"}],className:"basic-multi-select my-4 p-1",classNamePrefix:"select",defaultValue:{value:"Trung cấp",label:"Trung cấp"},...s})})]}),e.jsxs("div",{className:"flex-col flex flex-1 md:basis-1/6 px-1",children:[e.jsx("label",{className:"underline font-semibold",children:"Là đảng viên:"}),e.jsx(i,{required:!0,...a("dangvien"),options:[{value:!0,label:"Có"},{value:!1,label:"Không"}],className:"basic-multi-select my-4 p-1",classNamePrefix:"select",defaultValue:{value:!0,label:"Có"},onChange:s=>{T(s.value),m("dangvien",s)}})]}),e.jsxs("div",{className:"flex-col flex flex-1 md:basis-1/4 px-1",children:[e.jsx("label",{className:"underline font-semibold",children:"Cấp bậc hàm:"}),e.jsx(c,{control:t,name:"bacham",render:({field:s})=>e.jsx(i,{options:v,className:"basic-multi-select my-4 p-1",classNamePrefix:"select",placeholder:"Vui lòng chọn cấp hàm",required:!0,...s})})]}),e.jsxs("div",{className:"flex-col flex flex-1 md:basis-1/4 px-1",children:[e.jsx("label",{className:"underline font-semibold",children:"Chức vụ công tác:"}),e.jsx(c,{control:t,name:"chucvu",render:({field:s})=>e.jsx(i,{required:!0,options:y,className:"basic-multi-select my-4 p-1",classNamePrefix:"select",placeholder:"Vui lòng chọn chức vụ",...s})})]}),e.jsxs("div",{className:"flex-col flex flex-1 md:basis-1/4 px-1",children:[e.jsxs("label",{className:"underline font-semibold",children:[e.jsx("span",{className:"text-red-600 font-semibold",children:" (*)"})," Đơn vị công tác:"]}),e.jsx(c,{control:t,name:"donvi",render:({field:s})=>e.jsx(i,{options:b,className:"basic-multi-select my-4 p-1",classNamePrefix:"select",placeholder:"Vui lòng chọn đơn vị công tác",required:!0,...s})})]}),e.jsxs("div",{className:"flex-col flex flex-1 md:basis-1/4 px-1",children:[e.jsxs("label",{className:"underline font-semibold",children:[e.jsx("span",{className:"text-red-600 font-semibold",children:" (*)"})," Đội, công an xã:"]}),e.jsx(c,{control:t,name:"doi",render:({field:s})=>e.jsx(i,{options:N,className:"basic-multi-select my-4 p-1",classNamePrefix:"select",placeholder:"Vui lòng chọn đội công tác, ca xã",required:!0,...s})})]}),e.jsxs("div",{className:"flex-col flex md:basis-1/4 flex-1 px-1",children:[e.jsxs("label",{className:"underline font-semibold",children:[e.jsx("span",{className:"text-red-600 font-semibold",children:" (*)"})," Ngày lên quân hàm hiện tại: "]}),e.jsx("input",{...a("ngaylenham"),placeholder:"dd-mm-yyyy",type:"date",className:`outline-none my-4 border rounded-md p-2 border-neutral-600\r
                  focus:ring-2 focus:border-blue-400`,required:!0})]}),e.jsxs("div",{className:"flex-col flex md:basis-1/4 flex-1 px-1",children:[e.jsxs("label",{className:"underline font-semibold",children:[e.jsx("span",{className:"text-red-600 font-semibold",children:" (*)"})," Ngày giữ chức vụ hiện tại: "]}),e.jsx("input",{...a("ngaygiuchucvu"),placeholder:"dd-mm-yyyy",type:"date",className:`outline-none my-4 border rounded-md p-2 border-neutral-600\r
                  focus:ring-2 focus:border-blue-400`,required:!0})]}),e.jsxs("div",{className:"flex-col flex md:basis-1/4 flex-1 px-1",children:[e.jsxs("label",{className:"underline font-semibold",children:[e.jsx("span",{className:"text-red-600 font-semibold",children:" (*)"})," Ngày nhận QĐ về đơn vị: "]}),e.jsx("input",{...a("ngayvedonvi"),placeholder:"dd-mm-yyyy",type:"date",className:`outline-none my-4 border rounded-md p-2 border-neutral-600\r
                  focus:ring-2 focus:border-blue-400`,required:!0})]}),e.jsxs("div",{className:"flex-col flex md:basis-1/4 flex-1 px-1",children:[e.jsxs("label",{className:"underline font-semibold",children:[e.jsx("span",{className:"text-red-600 font-semibold",children:" (*)"})," Ngày nhận QĐ về đội, xã: "]}),e.jsx("input",{...a("ngayvedoi"),placeholder:"dd-mm-yyyy",type:"date",className:`outline-none my-4 border rounded-md p-2 border-neutral-600\r
                  focus:ring-2 focus:border-blue-400`,required:!0})]}),D===!0?e.jsxs("div",{className:"flex-col flex md:basis-1/4 flex-1 px-1",children:[e.jsxs("label",{className:"underline font-semibold",children:[e.jsx("span",{className:"text-red-600 font-semibold",children:" (*)"})," Ngày kết nạp vào đảng: "]}),e.jsx("input",{...a("ngayvaodang"),placeholder:"dd-mm-yyyy",type:"date",className:`outline-none my-4 border rounded-md p-2 border-neutral-600\r
                  focus:ring-2 focus:border-blue-400`})]}):""]})]}),e.jsx("div",{className:"md:space-x-2 space-y-2 md:space-y-0 md:block flex flex-col items-center mt-4",children:e.jsxs(B,{type:"submit",sx:{width:"220px",backgroundColor:"gray"},color:"primary",variant:"contained",children:[e.jsx(L,{})," Thêm mới"]})})]})]})};export{I as default};
