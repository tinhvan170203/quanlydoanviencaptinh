import{j as e,r as x,m as G,Q as J}from"./index-2b00a054.js";import{d as Z}from"./GridView-85d728d6.js";import{c as ee}from"./chidoanApi-461c2452.js";import{d as _}from"./Search-c2bf7f37.js";import{u as ae,C as z}from"./index.esm-322da860.js";import{d as ne}from"./Close-7c89c175.js";import{S as B}from"./react-select.esm-a86401bf.js";import{C as le,d as se}from"./FileDownload-3a33c116.js";import{t as q}from"./thongkeApi-29f415fb.js";import{c as C,d as s,e as j,f as M,P as Q,h as K,i as W,j as A,k as H,u as O,a as E,I as m,l as N,m as P,n as v,o as S}from"./LastPage-e02fc572.js";import{d as te}from"./dayjs.min-51d44ca9.js";import{B as T}from"./Button-c283a03a.js";import"./createSvgIcon-46c59fe3.js";import"./ButtonBase-ca61bcf9.js";import"./Link-ed3a8026.js";const ie=({row:l,page:n,rowsPerPage:c,index:a})=>e.jsxs(C,{className:"hover:bg-slate-200 transition duration-300",children:[e.jsx(s,{className:"border-r border-slate-300",align:"left",style:{fontWeight:"bold"},children:n*c+a}),e.jsx(s,{className:"border-r border-slate-300",align:"left",children:e.jsx("span",{className:"font-bold",children:l.soQD})}),e.jsx(s,{className:"border-r border-slate-300",align:"left",children:l.hinhthuc}),e.jsx(s,{className:"border-r border-slate-300",align:"left",children:l.nguoiky}),e.jsx(s,{className:"border-r border-slate-300",align:"left",children:l.canhanbikiluat.hoten}),e.jsx(s,{className:"border-r border-slate-300",align:"left",children:te(l.ngayky).format("DD/MM/YYYY")}),e.jsx(s,{className:"border-r border-slate-300",align:"left",children:l.noidung}),e.jsx(s,{align:"right",className:"bg-gray-300 flex justify-center items-center space-x-1 hover:bg-slate-500 transition duration-300",style:{width:"180px"},children:e.jsx(T,{variant:"contained",color:"info",size:"small",onClick:()=>window.open(`/dashboard/thong-tin-doan-vien/${l.canhanbikiluat._id}`,"_blank","noreferrer"),children:"Trang cá nhân"})})]},l._id);function F(l){const n=O(),{count:c,page:a,rowsPerPage:u,onPageChange:r}=l,p=t=>{r(t,0)},d=t=>{r(t,a-1)},i=t=>{r(t,a+1)},h=t=>{r(t,Math.max(0,Math.ceil(c/u)-1))};return e.jsxs(E,{sx:{flexShrink:0,ml:2.5},children:[e.jsx(m,{onClick:p,disabled:a===0,"aria-label":"first page",children:n.direction==="rtl"?e.jsx(N,{}):e.jsx(P,{})}),e.jsx(m,{onClick:d,disabled:a===0,"aria-label":"previous page",children:n.direction==="rtl"?e.jsx(v,{}):e.jsx(S,{})}),e.jsx(m,{onClick:i,disabled:a>=Math.ceil(c/u)-1,"aria-label":"next page",children:n.direction==="rtl"?e.jsx(S,{}):e.jsx(v,{})}),e.jsx(m,{onClick:h,disabled:a>=Math.ceil(c/u)-1,"aria-label":"last page",children:n.direction==="rtl"?e.jsx(P,{}):e.jsx(N,{})})]})}F.propTypes={count:j.number.isRequired,onPageChange:j.func.isRequired,page:j.number.isRequired,rowsPerPage:j.number.isRequired};function oe({list:l}){const[n,c]=x.useState(0),[a,u]=x.useState(10),r=n>0?Math.max(0,(1+n)*a-l.length):0,p=(i,h)=>{c(h)},d=i=>{u(parseInt(i.target.value,10)),c(0)};return e.jsxs(e.Fragment,{children:[e.jsx(M,{component:Q,children:e.jsxs(K,{"aria-label":"custom pagination table",children:[e.jsx(W,{children:e.jsxs(C,{children:[e.jsx(s,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"rgb(30, 41, 59 )"},children:"#"}),e.jsx(s,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"rgb(30, 41, 59 )"},children:"Số quyết định"}),e.jsx(s,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",minWidth:"100px",backgroundColor:"rgb(30, 41, 59 )"},children:"Hình thức"}),e.jsx(s,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",minWidth:"100px",backgroundColor:"rgb(30, 41, 59 )"},children:"Người ký"}),e.jsx(s,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",minWidth:"100px",backgroundColor:"rgb(30, 41, 59 )"},children:"Cá nhân bị kỉ luật"}),e.jsx(s,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",minWidth:"100px",backgroundColor:"rgb(30, 41, 59 )"},children:"Ngày ký"}),e.jsx(s,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",minWidth:"200px",backgroundColor:"rgb(30, 41, 59 )"},children:"Nội dung kỉ luật"}),e.jsx(s,{align:"center",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"rgb(30, 41, 59 )",maxWidth:"150px"},children:"Thao tác"})]})}),e.jsxs(A,{children:[(a>0?l.slice(n*a,n*a+a):l).map((i,h)=>e.jsx(ie,{row:i,page:n,rowsPerPage:a,index:h+1},i._id)),r>0&&e.jsx(C,{style:{height:53*r},children:e.jsx(s,{colSpan:6})})]})]})}),e.jsx("div",{children:e.jsx(H,{rowsPerPageOptions:[10,25,50,100,{label:"Tất cả",value:-1}],count:l.length,rowsPerPage:a,page:n,SelectProps:{inputProps:{"aria-label":"rows per page"},native:!0},component:"div",onPageChange:p,onRowsPerPageChange:d,ActionsComponent:F,labelRowsPerPage:"Số bản ghi hiển thị trên mỗi trang",labelDisplayedRows:function({from:h,to:t,count:k}){return`hiển thị ${h} đến ${t} bản ghi trong tổng số ${k!==-1?k:`more than ${t}`} bản ghi`}})})]})}function L(l){const n=O(),{count:c,page:a,rowsPerPage:u,onPageChange:r}=l,p=t=>{r(t,0)},d=t=>{r(t,a-1)},i=t=>{r(t,a+1)},h=t=>{r(t,Math.max(0,Math.ceil(c/u)-1))};return e.jsxs(E,{sx:{flexShrink:0,ml:2.5},children:[e.jsx(m,{onClick:p,disabled:a===0,"aria-label":"first page",children:n.direction==="rtl"?e.jsx(N,{}):e.jsx(P,{})}),e.jsx(m,{onClick:d,disabled:a===0,"aria-label":"previous page",children:n.direction==="rtl"?e.jsx(v,{}):e.jsx(S,{})}),e.jsx(m,{onClick:i,disabled:a>=Math.ceil(c/u)-1,"aria-label":"next page",children:n.direction==="rtl"?e.jsx(S,{}):e.jsx(v,{})}),e.jsx(m,{onClick:h,disabled:a>=Math.ceil(c/u)-1,"aria-label":"last page",children:n.direction==="rtl"?e.jsx(P,{}):e.jsx(N,{})})]})}L.propTypes={count:j.number.isRequired,onPageChange:j.func.isRequired,page:j.number.isRequired,rowsPerPage:j.number.isRequired};function re({list:l}){const[n,c]=x.useState(0),[a,u]=x.useState(10);n>0&&Math.max(0,(1+n)*a-l.length);const r=(d,i)=>{c(i)},p=d=>{u(parseInt(d.target.value,10)),c(0)};return console.log(l),e.jsxs(e.Fragment,{children:[e.jsx(M,{component:Q,children:e.jsxs(K,{"aria-label":"custom pagination table",children:[e.jsx(W,{children:e.jsxs(C,{children:[e.jsx(s,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"rgb(30, 41, 59 )"},children:"#"}),e.jsx(s,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"rgb(30, 41, 59 )"},children:"Họ và tên"}),e.jsx(s,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",minWidth:"100px",backgroundColor:"rgb(30, 41, 59 )"},children:"Số lượt bị kỉ luật"}),e.jsx(s,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",minWidth:"100px",backgroundColor:"rgb(30, 41, 59 )"},children:"Chi tiết"})]})}),e.jsx(A,{children:(a>0?l.slice(n*a,n*a+a):l).map((d,i)=>e.jsxs(C,{className:"hover:bg-slate-200 transition duration-300",children:[e.jsx(s,{className:"border-r border-slate-300",align:"left",style:{fontWeight:"bold"},children:n*a+i+1}),e.jsx(s,{className:"border-r border-slate-300",align:"left",children:e.jsx("span",{className:"font-bold",children:d.hoten})}),e.jsx(s,{className:"border-r border-slate-300",align:"left",children:d.soluotkiluat}),e.jsx(s,{className:"border-r border-slate-300",align:"right",children:e.jsx(T,{variant:"contained",color:"info",size:"small",onClick:()=>window.open(`/dashboard/thong-tin-doan-vien/${d._id}`,"_blank","noreferrer"),children:"Trang cá nhân"})})]},d._id))})]})}),e.jsx("div",{children:e.jsx(H,{rowsPerPageOptions:[10,25,50,100,{label:"Tất cả",value:-1}],count:l.length,rowsPerPage:a,page:n,SelectProps:{inputProps:{"aria-label":"rows per page"},native:!0},component:"div",onPageChange:r,onRowsPerPageChange:p,ActionsComponent:L,labelRowsPerPage:"Số bản ghi hiển thị trên mỗi trang",labelDisplayedRows:function({from:i,to:h,count:t}){return`hiển thị ${i} đến ${h} bản ghi trong tổng số ${t!==-1?t:`more than ${h}`} bản ghi`}})})]})}let ce=[{label:"STT",key:"stt"},{label:"Số quyết định",key:"soQD"},{label:"Hình thức",key:"hinhthuc"},{label:"Người ký",key:"nguoiky"},{label:"Cá nhân bị kỉ luật",key:"canhanbikiluat"},{label:"Ngày ký",key:"ngayky"},{label:"Nội dung",key:"noidung"}];const we=()=>{const[l,n]=x.useState([]),[c,a]=x.useState([]),[u,r]=x.useState(!1),[p,d]=x.useState([]);let[i,h]=x.useState([]);const[t,k]=G(),[w,D]=x.useState([]),[I,V]=x.useState(!1);x.useEffect(()=>{(async()=>{try{let g=await ee.getChidoanOfUser();a(g.data.map(o=>({label:o.tenchidoan,value:o._id}))),d([{label:"Tất cả",value:""}].concat(g.data.map(o=>({value:o._id,label:o.tenchidoan}))))}catch(g){console.log(g.message)}})()},[]);const{register:y,handleSubmit:Y,control:R,resetField:de,setValue:he,watch:$,formState:{errors:ue}}=ae({defaultValues:{hinhthuc:{label:"Tất cả",value:""},nhomchidoanduockhenthuong:{label:"Tất cả",value:""},tungay:"",denngay:"",soQD:"",noidung:"",nguoiky:""}}),X=async b=>{let g={...b,hinhthuc:b.hinhthuc.value,nhomchidoanduockhenthuong:b.nhomchidoanduockhenthuong.value};k(!0);let o=await q.getKiluats(g);console.log(o),n(o.data.data),h(o.data.data.map((f,U)=>({stt:U+1,soQD:f.soQD,ngayky:f.ngayky,noidung:f.noidung,nguoiky:f.nguoiky,hinhthuc:f.hinhthuc,canhanbikiluat:f.canhanbikiluat.hoten}))),D(o.data.canhanbikiluats),k(!1),J.success(o.data.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"})};return x.useEffect(()=>{(async()=>{try{k(!0);let g=await q.getKiluats({tungay:"",denngay:"",nhomchidoanduockhenthuong:"",hinhthuc:"",soQD:"",nguoiky:"",noidung:""});n(g.data.data),h(g.data.data.map((o,f)=>({stt:f+1,soQD:o.soQD,ngayky:o.ngayky,noidung:o.noidung,nguoiky:o.nguoiky,hinhthuc:o.hinhthuc,canhanbikiluat:o.canhanbikiluat.hoten}))),D(g.data.canhanbikiluats),setTimeout(()=>{k(!1)},400)}catch(g){console.log(g.message)}})()},[]),e.jsxs("div",{className:"pr-2","data-aos":"fade-left","data-aos-once":"true",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Z,{color:"primary",fontSize:"large"}),e.jsx("h4",{className:"font-bold text-gray-800 text-lg",children:"Quản lý khen thưởng đối với tập thể chi đoàn, liên chi đoàn"})]}),e.jsxs("div",{className:"mt-4 text-end md:space-x-2 space-y-2 md:space-y-0 md:block flex flex-col items-center",children:[e.jsxs(T,{sx:{width:"300px",backgroundColor:"darkgray"},onClick:()=>r(!0),color:"info",variant:"contained",children:[e.jsx(_,{})," Chức năng tìm kiếm nâng cao"]}),e.jsx(m,{children:e.jsx(le,{data:i,headers:ce,filename:`danhsachkiluat_${$("tungay")}_${$("denngay")}`,children:e.jsxs("div",{className:"flex items-center shadow-md space-x-2 bg-green-300 px-2 py-1 rounded-md",children:[e.jsx(se,{}),e.jsx("span",{className:"text-sm text-green-800",children:"Xuất file excel"})]})})})]}),u&&e.jsxs("form",{onSubmit:Y(X),className:"my-2 mt-4 mx-8 bg-slate-100 p-4 rounded-lg shadow-xl","data-aos":"zoom-in-down","data-aos-once":"true",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("h5",{className:"text-[18px] font-semibold",children:"Tìm kiếm nâng cao"}),e.jsx(m,{onClick:()=>r(!1),sx:{backgroundColor:"#333"},children:e.jsx(ne,{sx:{color:"white"}})})]}),e.jsxs("div",{className:"flex flex-wrap xl:flex-row flex-col flex-1 p-2",children:[e.jsxs("div",{className:"flex-col md:basis-1/3 flex flex-1 px-1",children:[e.jsx("label",{className:"underline font-semibold",children:"Số QĐ kỉ luật: "}),e.jsx("input",{...y("soQD"),type:"text",className:`outline-none my-4 border rounded-md p-2 border-neutral-600\r
                    focus:ring-2 focus:border-blue-400`})]}),e.jsxs("div",{className:"flex-col md:basis-1/6 flex flex-1 px-1",children:[e.jsx("label",{className:"underline font-semibold",children:"Từ ngày: "}),e.jsx("input",{...y("tungay"),type:"date",className:`outline-none my-4 border rounded-md p-2 border-neutral-600\r
                  focus:ring-2 focus:border-blue-400`})]}),e.jsxs("div",{className:"flex-col md:basis-1/6 flex flex-1 px-1",children:[e.jsx("label",{className:"underline font-semibold",children:"Đến ngày: "}),e.jsx("input",{...y("denngay"),type:"date",className:`outline-none my-4 border rounded-md p-2 border-neutral-600\r
                  focus:ring-2 focus:border-blue-400`})]}),e.jsxs("div",{className:"flex-col md:basis-1/3 flex flex-1 px-1",children:[e.jsx("label",{className:"underline font-semibold",children:"Người ký: "}),e.jsx("input",{...y("nguoiky"),type:"text",className:`outline-none my-4 border rounded-md p-2 border-neutral-600\r
                  focus:ring-2 focus:border-blue-400`})]}),e.jsxs("div",{className:"flex-col md:basis-full flex flex-1 px-1",children:[e.jsx("label",{className:"underline font-semibold",children:"Nội dung kỉ luật: "}),e.jsx("input",{...y("noidung"),type:"text",className:`outline-none my-4 border rounded-md p-2 border-neutral-600\r
                  focus:ring-2 focus:border-blue-400`})]}),e.jsxs("div",{className:"flex-col flex flex-1 px-1",children:[e.jsx("label",{className:"underline font-semibold",children:"Hình thức kỉ luật: "}),e.jsx(z,{control:R,name:"hinhthuc",render:({field:b})=>e.jsx(B,{options:[{label:"Tất cả",value:""},{label:"Khiển trách",value:"Khiển trách"},{label:"Cảnh cáo",value:"Cảnh cáo"},{label:"Hạ cấp bậc hàm",value:"Hạ cấp bậc hàm"},{label:"Tước quân tịch CAND",value:"Tước quân tịch CAND"}],className:"basic-multi-select my-4 p-1",classNamePrefix:"select",placeholder:"Vui lòng chọn hình thức",...b})})]}),e.jsxs("div",{className:"flex-col md:basis-1/3 flex flex-1 px-1",children:[e.jsx("label",{className:"underline font-semibold",children:"Chi đoàn, liên chi đoàn: "}),e.jsx(z,{control:R,name:"nhomchidoanduockhenthuong",render:({field:b})=>e.jsx(B,{options:p,className:"basic-multi-select my-4 p-1",classNamePrefix:"select",placeholder:"Tất cả",...b})})]})]}),e.jsx("div",{className:"my-2 text-center",children:e.jsxs(T,{sx:{width:"200px",backgroundColor:"slategray"},type:"submit",color:"info",variant:"contained",children:[e.jsx(_,{})," Tìm kiếm"]})})]}),e.jsxs("div",{className:"mt-6 mx-8",children:[e.jsx("h3",{className:"text-center my-4 text-xl",children:"Danh sách kết quả kỉ luật cá nhân"}),e.jsxs("div",{className:"my-4",children:[e.jsxs("h4",{children:["Tổng số ",e.jsx("span",{className:"font-bold text-xl",children:w.length})," cá nhân bị kỉ luật. ",e.jsx("span",{className:"cursor-pointer underline text-blue-700",onClick:()=>V(!0),children:"Xem chi tiết"})]}),I&&e.jsx("div",{className:"my-4","data-aos":"zoom-in-down","data-aos-once":"true",children:e.jsx(re,{list:w})})]}),e.jsx(oe,{list:l})]})]})};export{we as default};
