import{r as P,j as e,m as O,Q as u}from"./index-2b00a054.js";import{d as R}from"./GridView-85d728d6.js";import"./index.esm-a80e06b2.js";import{u as _}from"./index.esm-322da860.js";import{d as z}from"./Add-84462153.js";import{c as C}from"./canboApi-c8a721f9.js";import{d as $}from"./dayjs.min-51d44ca9.js";import{e as j,f as H,P as M,h as A,i as F,c as k,d as l,j as L,k as q,u as W,a as Y,I as v,l as S,m as N,n as B,o as D}from"./LastPage-e02fc572.js";import{B as y}from"./Button-c283a03a.js";import"./createSvgIcon-46c59fe3.js";import"./ButtonBase-ca61bcf9.js";function T(c){const t=W(),{count:i,page:a,rowsPerPage:d,onPageChange:s}=c,p=r=>{s(r,0)},x=r=>{s(r,a-1)},f=r=>{s(r,a+1)},n=r=>{s(r,Math.max(0,Math.ceil(i/d)-1))};return e.jsxs(Y,{sx:{flexShrink:0,ml:2.5},children:[e.jsx(v,{onClick:p,disabled:a===0,"aria-label":"first page",children:t.direction==="rtl"?e.jsx(S,{}):e.jsx(N,{})}),e.jsx(v,{onClick:x,disabled:a===0,"aria-label":"previous page",children:t.direction==="rtl"?e.jsx(B,{}):e.jsx(D,{})}),e.jsx(v,{onClick:f,disabled:a>=Math.ceil(i/d)-1,"aria-label":"next page",children:t.direction==="rtl"?e.jsx(D,{}):e.jsx(B,{})}),e.jsx(v,{onClick:n,disabled:a>=Math.ceil(i/d)-1,"aria-label":"last page",children:t.direction==="rtl"?e.jsx(N,{}):e.jsx(S,{})})]})}T.propTypes={count:j.number.isRequired,onPageChange:j.func.isRequired,page:j.number.isRequired,rowsPerPage:j.number.isRequired};function I({list:c,onChangeStatus:t,onDelete:i}){const[a,d]=P.useState(0),[s,p]=P.useState(10);a>0&&Math.max(0,(1+a)*s-c.length);const x=(n,r)=>{d(r)},f=n=>{p(parseInt(n.target.value,10)),d(0)};return e.jsxs(e.Fragment,{children:[e.jsx(H,{component:M,children:e.jsxs(A,{"aria-label":"custom pagination table",children:[e.jsx(F,{children:e.jsxs(k,{children:[e.jsx(l,{align:"left",rowSpan:2,style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"rgb(30, 41, 59 )"},children:"#"}),e.jsx(l,{align:"left",rowSpan:2,style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"rgb(30, 41, 59 )"},children:"Họ tên"}),e.jsx(l,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",minWidth:"100px",backgroundColor:"rgb(30, 41, 59 )"},children:"Ngày sinh"}),e.jsx(l,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",minWidth:"100px",backgroundColor:"rgb(30, 41, 59 )"},children:"Đơn vị"}),e.jsx(l,{align:"right",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",minWidth:"100px",backgroundColor:"rgb(30, 41, 59 )"},children:"Thao tác"})]})}),e.jsx(L,{children:(s>0?c.slice(a*s,a*s+s):c).map((n,r)=>e.jsxs(k,{className:"hover:bg-slate-200 transition duration-300",children:[e.jsx(l,{className:"border-r border-slate-300",align:"left",style:{fontWeight:"bold"},children:a*s+r+1}),e.jsx(l,{className:"border-r border-slate-300",align:"left",children:e.jsx("span",{className:"font-bold",children:n.hoten})}),e.jsx(l,{className:"border-r border-slate-300",align:"left",children:$(n.ngaysinh).format("DD/MM/YYYY")}),e.jsx(l,{className:"border-r border-slate-300",align:"left",children:e.jsx("p",{className:"truncate",children:n.donviPopulate[0].tendonvi})}),e.jsxs(l,{className:"border-r border-slate-300",align:"right",children:[e.jsx(y,{variant:"contained",color:"info",size:"small",onClick:()=>t(n._id),children:"Thay đổi trạng thái active"}),e.jsx(y,{variant:"contained",color:"info",size:"small",style:{marginLeft:"12px"},onClick:()=>i(n._id),children:"Xóa đoàn viên khỏi hệ thống vĩnh viễn"})]})]},n._id))})]})}),e.jsx("div",{children:e.jsx(q,{rowsPerPageOptions:[10,25,50,100,{label:"Tất cả",value:-1}],count:c.length,rowsPerPage:s,page:a,SelectProps:{inputProps:{"aria-label":"rows per page"},native:!0},component:"div",onPageChange:x,onRowsPerPageChange:f,ActionsComponent:T,labelRowsPerPage:"Số bản ghi hiển thị trên mỗi trang",labelDisplayedRows:function({from:r,to:m,count:b}){return`hiển thị ${r} đến ${m} bản ghi trong tổng số ${b!==-1?b:`more than ${m}`} bản ghi`}})})]})}const te=()=>{const[c,t]=O(),[i,a]=P.useState([]),{register:d,handleSubmit:s,control:p,resetField:x,setValue:f,watch:n,formState:{errors:r}}=_({defaultValues:{hoten:""}}),m=async h=>{let o={...h};try{t(!0);let g=await C.fetchCanboStatusDelete(o);a(g.data),t(!1)}catch(g){u.error(g.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}),t(!1)}},b=async h=>{t(!0);try{await C.changeActive(h);let o=[...i];o=o.filter(g=>g._id.toString()!==h),a(o),t(!1),u.success("Thay đổi trạng thái thành công",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"})}catch(o){u.error(o.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}),t(!1)}},w=async h=>{t(!0);try{await C.deletePersonAdvaned(h);let o=[...i];o=o.filter(g=>g._id.toString()!==h),a(o),t(!1),u.success("Xóa đoàn viên khỏi hệ thống thành công",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"})}catch(o){u.error(o.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}),t(!1)}};return e.jsxs("div",{className:"pr-2","data-aos":"fade-left","data-aos-once":"true",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(R,{color:"primary",fontSize:"large"}),e.jsx("h4",{className:"font-bold text-gray-800 text-lg",children:"Danh sách đoàn viên được xóa mức 1 trong hệ thống"})]}),e.jsx("form",{onSubmit:s(m),children:e.jsxs("div",{className:"flex mt-4 px-4 space-x-2 md:flex-row justify-end items-start",children:[e.jsxs("div",{className:"flex-col md:basis-1/3 flex flex-1 px-1",children:[e.jsx("label",{className:"underline font-semibold",children:"Họ tên: "}),e.jsx("input",{...d("hoten"),type:"text",className:`outline-none my-4 border rounded-md p-2 border-neutral-600\r
                    focus:ring-2 focus:border-blue-400`})]}),e.jsx("div",{className:"flex-col flex md:basis-1/6",children:e.jsxs(y,{size:"small",type:"submit",sx:{width:"220px",backgroundColor:"gray"},color:"primary",variant:"contained",children:[e.jsx(z,{})," Lấy dữ liệu"]})})]})}),e.jsx("div",{className:"px-4","data-aos":"fade-left","data-aos-once":"true",children:e.jsx("div",{className:"mt-4",children:e.jsx(I,{list:i,onChangeStatus:b,onDelete:w})})})]})};export{te as default};
