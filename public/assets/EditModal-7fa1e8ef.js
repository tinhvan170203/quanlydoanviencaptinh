import{n as j,r as b,d as w,j as e}from"./index-2b00a054.js";import{c as C,d as o,e as y,f as R,P as _,h as $,i as B,j as z,k as q,u as M,a as S,I as f,l as P,m as N,n as T,o as k}from"./LastPage-e02fc572.js";import{f as D,g as F,S as W,D as V,a as A,h as E,d as I,b as L,c as K}from"./DialogDelete-f919c647.js";import{B as p}from"./Button-c283a03a.js";import"./index.esm-a80e06b2.js";import{u as H,C as O}from"./index.esm-322da860.js";import{d as G}from"./Add-84462153.js";import{s as J}from"./ButtonBase-ca61bcf9.js";import{S as Q}from"./Switch-39e410f5.js";const oe={getNotifications(t){const n="/notification/fetch";return j.get(n,{params:t})},addNotification(t){const n="/notification/add";return j.post(n,t)},editNotification(t){const n=`/notification/edit/${t.id_edit}`;return j.put(n,t)},deleteNotification(t,n){const i=`/notification/delete/${t}`;return j.delete(i,{params:n})}},U=({row:t,page:n,rowsPerPage:i,index:s,onClickOpenDialogEdit:l,onClickOpenDialogDelete:a})=>{b.useState(null);const d=w(u=>u.authReducer.roles_quanlydoanvien);return e.jsxs(C,{className:"hover:bg-slate-200 transition duration-300",children:[e.jsx(o,{className:"border-r border-slate-300",align:"left",style:{fontWeight:"bold"},children:n*i+s}),e.jsx(o,{className:"border-r border-slate-300",align:"left",children:t.thongbao}),e.jsx(o,{className:"border-r border-slate-300",align:"left",children:t.thutu}),e.jsx(o,{className:"border-r border-slate-300",align:"left",children:t.status===!0?e.jsx(p,{color:"success",children:"Đang hiển thị"}):e.jsx(p,{color:"warning",children:"Không hiển thị"})}),e.jsxs(o,{align:"right",className:"bg-gray-300 flex justify-center items-center space-x-1 hover:bg-slate-500 transition duration-300",style:{width:"180px"},children:[d&&d.includes("sửa thông báo")&&e.jsx(p,{variant:"contained",color:"info",size:"small",onClick:()=>l(t),children:e.jsx(D,{style:{fontSize:"20px"}})}),d&&d.includes("xóa thông báo")&&e.jsx(p,{variant:"contained",color:"error",size:"small",style:{marginLeft:"4px"},onClick:()=>a(t._id),children:e.jsx(F,{style:{fontSize:"20px"}})})]})]},t._id)};function v(t){const n=M(),{count:i,page:s,rowsPerPage:l,onPageChange:a}=t,d=r=>{a(r,0)},u=r=>{a(r,s-1)},x=r=>{a(r,s+1)},m=r=>{a(r,Math.max(0,Math.ceil(i/l)-1))};return e.jsxs(S,{sx:{flexShrink:0,ml:2.5},children:[e.jsx(f,{onClick:d,disabled:s===0,"aria-label":"first page",children:n.direction==="rtl"?e.jsx(P,{}):e.jsx(N,{})}),e.jsx(f,{onClick:u,disabled:s===0,"aria-label":"previous page",children:n.direction==="rtl"?e.jsx(T,{}):e.jsx(k,{})}),e.jsx(f,{onClick:x,disabled:s>=Math.ceil(i/l)-1,"aria-label":"next page",children:n.direction==="rtl"?e.jsx(k,{}):e.jsx(T,{})}),e.jsx(f,{onClick:m,disabled:s>=Math.ceil(i/l)-1,"aria-label":"last page",children:n.direction==="rtl"?e.jsx(N,{}):e.jsx(P,{})})]})}v.propTypes={count:y.number.isRequired,onPageChange:y.func.isRequired,page:y.number.isRequired,rowsPerPage:y.number.isRequired};function de({list:t,onClickOpenDialogEdit:n,onClickOpenDialogDelete:i}){const[s,l]=b.useState(0),[a,d]=b.useState(10),u=s>0?Math.max(0,(1+s)*a-t.length):0,x=(r,g)=>{l(g)},m=r=>{d(parseInt(r.target.value,10)),l(0)};return e.jsxs(e.Fragment,{children:[e.jsx(R,{component:_,children:e.jsxs($,{"aria-label":"custom pagination table",children:[e.jsx(B,{children:e.jsxs(C,{children:[e.jsx(o,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"rgb(30, 41, 59 )"},children:"#"}),e.jsx(o,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"rgb(30, 41, 59 )"},children:"Thông báo"}),e.jsx(o,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",minWidth:"100px",backgroundColor:"rgb(30, 41, 59 )"},children:"Thứ tự"}),e.jsx(o,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",minWidth:"200px",backgroundColor:"rgb(30, 41, 59 )"},children:"Trạng thái hiển thị"}),e.jsx(o,{align:"center",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"rgb(30, 41, 59 )",maxWidth:"150px"},children:"Thao tác"})]})}),e.jsxs(z,{children:[(a>0?t.slice(s*a,s*a+a):t).map((r,g)=>e.jsx(U,{row:r,page:s,rowsPerPage:a,index:g+1,onClickOpenDialogEdit:n,onClickOpenDialogDelete:i},r._id)),u>0&&e.jsx(C,{style:{height:53*u},children:e.jsx(o,{colSpan:6})})]})]})}),e.jsx("div",{children:e.jsx(q,{rowsPerPageOptions:[10,25,50,100,{label:"Tất cả",value:-1}],count:t.length,rowsPerPage:a,page:s,SelectProps:{inputProps:{"aria-label":"rows per page"},native:!0},component:"div",onPageChange:x,onRowsPerPageChange:m,ActionsComponent:v,labelRowsPerPage:"Số bản ghi hiển thị trên mỗi trang",labelDisplayedRows:function({from:g,to:h,count:c}){return`hiển thị ${g} đến ${h} bản ghi trong tổng số ${c!==-1?c:`more than ${h}`} bản ghi`}})})]})}const X=b.forwardRef(function(n,i){return e.jsx(W,{direction:"up",ref:i,...n})}),Y=J(f)({position:"absolute",right:"16px",top:"4px"});function ce({open:t,item:n,onCloseDialogEdit:i,onSubmit:s}){const{register:l,handleSubmit:a,control:d,resetField:u,setValue:x,watch:m,formState:{errors:r}}=H({defaultValues:{thongbao:"",thutu:1,status:!0}});b.useEffect(()=>{n&&(x("thongbao",n.thongbao,{shouldValidate:!0}),x("thutu",n.thutu,{shouldValidate:!0}),x("status",n.status,{shouldValidate:!0}))},[n]);const g=async h=>{if(s){const c={...h,id_edit:n._id};await s(c),i()}};return e.jsx(e.Fragment,{children:e.jsxs(V,{maxWidth:"lg",fullWidth:!0,disableEscapeKeyDown:!0,onClose:(h,c)=>{c!=="backdropClick"&&i(h,c)},open:t,TransitionComponent:X,keepMounted:!0,"aria-describedby":"alert-dialog-slide-description",children:[e.jsxs(A,{style:{display:"flex",borderBottom:"1px solid #ccc",backgroundColor:"rgb(30, 41, 59 )",margin:"0px"},children:[e.jsx(E,{style:{color:"white",fontSize:"24px",marginRight:"8px"}}),e.jsx("span",{className:"text-white text-[18px]",children:"Chỉnh sửa thông báo"}),e.jsx(Y,{onClick:()=>i(),children:e.jsx(I,{style:{color:"white"}})})]}),e.jsx(L,{children:e.jsx(S,{children:e.jsxs("form",{className:"mt-2 mx-8",onSubmit:a(g),children:[e.jsxs("div",{className:"flex-col flex",children:[e.jsxs("label",{className:"underline font-semibold",children:[e.jsx("span",{className:"text-red-600 font-semibold",children:" (*)"})," Nội dung thông báo: "]}),e.jsx("input",{...l("thongbao",{required:!0}),type:"text",className:`outline-none my-4 border rounded-md p-2 border-neutral-600\r
                  focus:ring-2 focus:border-blue-400`})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("div",{className:"flex-col flex md:basis-1/2",children:[e.jsxs("label",{className:"underline font-semibold",children:[e.jsx("span",{className:"text-red-600 font-semibold",children:" (*)"})," Thứ tự xuất hiện: "]}),e.jsx("input",{...l("thutu",{required:!0}),type:"number",className:`outline-none my-4 border rounded-md p-2 border-neutral-600\r
                  focus:ring-2 focus:border-blue-400`})]}),e.jsxs("div",{className:"flex-col flex md:basis-1/2",children:[e.jsx("label",{className:"underline font-semibold",children:"Trạng thái hiển thị:"}),e.jsx(O,{name:"status",control:d,render:({field:{value:h,onChange:c}})=>e.jsx(Q,{checked:h,onChange:c})})]})]}),e.jsx(K,{children:e.jsxs(p,{color:"primary",variant:"contained",type:"submit",style:{margin:"4px auto"},children:[e.jsx(G,{}),e.jsx("span",{children:"Cập nhật"})]})})]})})})]})})}export{ce as E,de as T,oe as n};
