import{n as q,r as x,d as H,j as e,m as Re,Q as S}from"./index-2b00a054.js";import{d as We}from"./GridView-85d728d6.js";import{d as R}from"./Search-c2bf7f37.js";import"./index.esm-a80e06b2.js";import{u as E,C as F}from"./index.esm-322da860.js";import{d as V}from"./Add-84462153.js";import{d as $e}from"./Close-7c89c175.js";import{S as W}from"./react-select.esm-a86401bf.js";import{f as Z,g as Be,S as ee,D as le,a as ne,h as ae,d as se,b as te,c as re,e as Ke}from"./DialogDelete-f919c647.js";import"./DialogEditKhentapthe-67adabbc.js";import{C as Qe,d as Ae}from"./FileDownload-3a33c116.js";import{c as Y}from"./canboApi-c8a721f9.js";import{c as w,d as n,e as v,f as ie,P as oe,h as de,i as ce,j as ue,k as he,u as xe,a as A,I as N,l as $,m as B,n as K,o as Q}from"./LastPage-e02fc572.js";import{d as T}from"./dayjs.min-51d44ca9.js";import{B as C}from"./Button-c283a03a.js";import{s as ge}from"./ButtonBase-ca61bcf9.js";import"./createSvgIcon-46c59fe3.js";import"./Link-ed3a8026.js";const P={getKiluatcanhans(l){const s=`/ki-luat/ca-nhan/${l}/fetch`;return q.get(s)},addKiluatcanhan(l){const s="/ki-luat/ca-nhan/add";return q.post(s,l)},editKiluatcanhan(l){const s=`/ki-luat/ca-nhan/edit/${l.id_edit}`;return q.put(s,l)},deleteKiluatcanhan(l){const s=`/ki-luat/ca-nhan/delete/${l}`;return q.delete(s)},searchKiluatcanhans(l,s){const o=`/ki-luat/ca-nhan/${l}/search`;return q.get(o,{params:s})}},Me=({row:l,page:s,rowsPerPage:o,index:t,onClickOpenDialogEdit:a,onClickOpenDialogDelete:d})=>{x.useState(null);const g=H(b=>b.authReducer.roles_quanlydoanvien);return e.jsxs(w,{className:"hover:bg-slate-200 transition duration-300",children:[e.jsx(n,{className:"border-r border-slate-300",align:"left",style:{fontWeight:"bold"},children:s*o+t}),e.jsx(n,{className:"border-r border-slate-300",align:"left",children:e.jsx("span",{className:"font-bold",children:l.soQD})}),e.jsx(n,{className:"border-r border-slate-300",align:"left",children:l.hinhthuc}),e.jsx(n,{className:"border-r border-slate-300",align:"left",children:l.nguoiky}),e.jsx(n,{className:"border-r border-slate-300",align:"left",children:T(l.ngayky).format("DD/MM/YYYY")}),e.jsx(n,{className:"border-r border-slate-300",align:"left",children:l.noidung}),e.jsxs(n,{align:"right",className:"bg-gray-300 flex justify-center items-center space-x-1 hover:bg-slate-500 transition duration-300",style:{width:"180px"},children:[g&&g.includes("sửa khen thưởng, kỉ luật")&&e.jsx(C,{variant:"contained",color:"info",size:"small",onClick:()=>a(l),children:e.jsx(Z,{style:{fontSize:"20px"}})}),g&&g.includes("xóa khen thưởng, kỉ luật")&&e.jsx(C,{variant:"contained",color:"error",size:"small",style:{marginLeft:"4px"},onClick:()=>d(l._id),children:e.jsx(Be,{style:{fontSize:"20px"}})})]})]},l._id)};function fe(l){const s=xe(),{count:o,page:t,rowsPerPage:a,onPageChange:d}=l,g=c=>{d(c,0)},b=c=>{d(c,t-1)},m=c=>{d(c,t+1)},y=c=>{d(c,Math.max(0,Math.ceil(o/a)-1))};return e.jsxs(A,{sx:{flexShrink:0,ml:2.5},children:[e.jsx(N,{onClick:g,disabled:t===0,"aria-label":"first page",children:s.direction==="rtl"?e.jsx($,{}):e.jsx(B,{})}),e.jsx(N,{onClick:b,disabled:t===0,"aria-label":"previous page",children:s.direction==="rtl"?e.jsx(K,{}):e.jsx(Q,{})}),e.jsx(N,{onClick:m,disabled:t>=Math.ceil(o/a)-1,"aria-label":"next page",children:s.direction==="rtl"?e.jsx(Q,{}):e.jsx(K,{})}),e.jsx(N,{onClick:y,disabled:t>=Math.ceil(o/a)-1,"aria-label":"last page",children:s.direction==="rtl"?e.jsx(B,{}):e.jsx($,{})})]})}fe.propTypes={count:v.number.isRequired,onPageChange:v.func.isRequired,page:v.number.isRequired,rowsPerPage:v.number.isRequired};function Oe({list:l,onClickOpenDialogEdit:s,onClickOpenDialogDelete:o}){const[t,a]=x.useState(0),[d,g]=x.useState(10),b=t>0?Math.max(0,(1+t)*d-l.length):0,m=(c,i)=>{a(i)},y=c=>{g(parseInt(c.target.value,10)),a(0)};return e.jsxs(e.Fragment,{children:[e.jsx(ie,{component:oe,children:e.jsxs(de,{"aria-label":"custom pagination table",children:[e.jsx(ce,{children:e.jsxs(w,{children:[e.jsx(n,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"rgb(30, 41, 59 )"},children:"#"}),e.jsx(n,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"rgb(30, 41, 59 )"},children:"Số quyết định"}),e.jsx(n,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",minWidth:"100px",backgroundColor:"rgb(30, 41, 59 )"},children:"Hình thức"}),e.jsx(n,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",minWidth:"100px",backgroundColor:"rgb(30, 41, 59 )"},children:"Người ký"}),e.jsx(n,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",minWidth:"100px",backgroundColor:"rgb(30, 41, 59 )"},children:"Ngày ký"}),e.jsx(n,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",minWidth:"200px",backgroundColor:"rgb(30, 41, 59 )"},children:"Nội dung kỉ luật"}),e.jsx(n,{align:"center",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"rgb(30, 41, 59 )",maxWidth:"150px"},children:"Thao tác"})]})}),e.jsxs(ue,{children:[(d>0?l.slice(t*d,t*d+d):l).map((c,i)=>e.jsx(Me,{row:c,page:t,rowsPerPage:d,index:i+1,onClickOpenDialogEdit:s,onClickOpenDialogDelete:o},c._id)),b>0&&e.jsx(w,{style:{height:53*b},children:e.jsx(n,{colSpan:6})})]})]})}),e.jsx("div",{children:e.jsx(he,{rowsPerPageOptions:[10,25,50,100,{label:"Tất cả",value:-1}],count:l.length,rowsPerPage:d,page:t,SelectProps:{inputProps:{"aria-label":"rows per page"},native:!0},component:"div",onPageChange:m,onRowsPerPageChange:y,ActionsComponent:fe,labelRowsPerPage:"Số bản ghi hiển thị trên mỗi trang",labelDisplayedRows:function({from:i,to:j,count:k}){return`hiển thị ${i} đến ${j} bản ghi trong tổng số ${k!==-1?k:`more than ${j}`} bản ghi`}})})]})}const Ye=x.forwardRef(function(s,o){return e.jsx(ee,{direction:"up",ref:o,...s})}),He=ge(N)({position:"absolute",right:"16px",top:"4px"});function Ee({open:l,onCloseDialogAdd:s,onSubmit:o}){const{register:t,handleSubmit:a,control:d,resetField:g,setValue:b,watch:m,formState:{errors:y}}=E({defaultValues:{}});x.useState([]);const c=async i=>{if(o){const j={...i};await o(j),g("soQD"),g("noidung")}};return e.jsx(e.Fragment,{children:e.jsxs(le,{maxWidth:"xl",fullWidth:!0,disableEscapeKeyDown:!0,onClose:(i,j)=>{j!=="backdropClick"&&s(i,j)},open:l,TransitionComponent:Ye,keepMounted:!0,"aria-describedby":"alert-dialog-slide-description",children:[e.jsxs(ne,{style:{display:"flex",borderBottom:"1px solid #ccc",backgroundColor:"rgb(30, 41, 59 )",margin:"0px"},children:[e.jsx(ae,{style:{color:"white",fontSize:"24px",marginRight:"8px"}}),e.jsx("span",{className:"text-white text-[18px]",children:"Thêm mới kỉ luật cá nhân"}),e.jsx(He,{onClick:()=>s(),children:e.jsx(se,{style:{color:"white"}})})]}),e.jsx(te,{children:e.jsx(A,{children:e.jsx("form",{className:"mt-2 mx-8",onSubmit:a(c),children:e.jsxs("div",{className:"flex flex-wrap xl:flex-row flex-col flex-1 p-2",children:[e.jsxs("div",{className:"flex-col md:basis-1/3 flex flex-1 px-1",children:[e.jsxs("label",{className:"underline font-semibold",children:[e.jsx("span",{className:"text-red-600 font-semibold",children:" (*)"})," Số QĐ kỉ luật: "]}),e.jsx("input",{...t("soQD",{required:!0}),type:"text",className:`outline-none my-4 border rounded-md p-2 border-neutral-600\r
                  focus:ring-2 focus:border-blue-400`})]}),e.jsxs("div",{className:"flex-col md:basis-1/3 flex flex-1 px-1",children:[e.jsxs("label",{className:"underline font-semibold",children:[e.jsx("span",{className:"text-red-600 font-semibold",children:" (*)"})," Ngày ký: "]}),e.jsx("input",{...t("ngayky",{required:!0}),type:"date",className:`outline-none my-4 border rounded-md p-2 border-neutral-600\r
                  focus:ring-2 focus:border-blue-400`})]}),e.jsxs("div",{className:"flex-col md:basis-1/3 flex flex-1 px-1",children:[e.jsxs("label",{className:"underline font-semibold",children:[e.jsx("span",{className:"text-red-600 font-semibold",children:" (*)"})," Người ký: "]}),e.jsx("input",{...t("nguoiky",{required:!0}),type:"text",className:`outline-none my-4 border rounded-md p-2 border-neutral-600\r
                  focus:ring-2 focus:border-blue-400`})]}),e.jsxs("div",{className:"flex-col md:basis-full flex flex-1 px-1",children:[e.jsxs("label",{className:"underline font-semibold",children:[e.jsx("span",{className:"text-red-600 font-semibold",children:" (*)"})," Nội dung kỉ luật: "]}),e.jsx("input",{...t("noidung",{required:!0}),type:"text",className:`outline-none my-4 border rounded-md p-2 border-neutral-600\r
                  focus:ring-2 focus:border-blue-400`})]}),e.jsxs("div",{className:"flex-col md:basis-full flex flex-1 px-1",children:[e.jsxs("label",{className:"underline font-semibold",children:[e.jsx("span",{className:"text-red-600 font-semibold",children:" (*)"})," Hình thức kỉ luật: "]}),e.jsx(F,{control:d,name:"hinhthuc",render:({field:i})=>e.jsx(W,{options:[{label:"Khiển trách",value:"Khiển trách"},{label:"Cảnh cáo",value:"Cảnh cáo"},{label:"Hạ cấp bậc hàm",value:"Hạ cấp bậc hàm"},{label:"Tước quân tịch CAND",value:"Tước quân tịch CAND"}],className:"basic-multi-select my-4 p-1",classNamePrefix:"select",placeholder:"Vui lòng chọn hình thức",required:!0,...i})})]}),e.jsx(re,{children:e.jsxs(C,{color:"primary",variant:"contained",type:"submit",style:{margin:"4px auto"},children:[e.jsx(V,{}),e.jsx("span",{children:"Thêm mới"})]})})]})})})})]})})}const Fe=x.forwardRef(function(s,o){return e.jsx(ee,{direction:"up",ref:o,...s})}),Ve=ge(N)({position:"absolute",right:"16px",top:"4px"});function Le({open:l,onCloseDialogEdit:s,item:o,onSubmit:t}){const{register:a,handleSubmit:d,control:g,resetField:b,setValue:m,watch:y,formState:{errors:c}}=E({defaultValues:{}});x.useState([]);const i=async j=>{if(t){const k={...j,id_edit:o._id};await t(k),s()}};return x.useEffect(()=>{o&&(m("soQD",o.soQD,{shouldValidate:!0}),m("hinhthuc",{label:o.hinhthuc,value:o.hinhthuc},{shouldValidate:!0}),m("noidung",o.noidung,{shouldValidate:!0}),m("ngayky",o.ngayky,{shouldValidate:!0}),m("nguoiky",o.nguoiky,{shouldValidate:!0}))},[o]),e.jsx(e.Fragment,{children:e.jsxs(le,{maxWidth:"xl",fullWidth:!0,disableEscapeKeyDown:!0,onClose:(j,k)=>{k!=="backdropClick"&&s(j,k)},open:l,TransitionComponent:Fe,keepMounted:!0,"aria-describedby":"alert-dialog-slide-description",children:[e.jsxs(ne,{style:{display:"flex",borderBottom:"1px solid #ccc",backgroundColor:"rgb(30, 41, 59 )",margin:"0px"},children:[e.jsx(ae,{style:{color:"white",fontSize:"24px",marginRight:"8px"}}),e.jsx("span",{className:"text-white text-[18px]",children:"Chỉnh sửa kỉ luật đối với cá nhân"}),e.jsx(Ve,{onClick:()=>s(),children:e.jsx(se,{style:{color:"white"}})})]}),e.jsx(te,{children:e.jsx(A,{children:e.jsx("form",{className:"mt-2 mx-8",onSubmit:d(i),children:e.jsxs("div",{className:"flex flex-wrap xl:flex-row flex-col flex-1 p-2",children:[e.jsxs("div",{className:"flex-col md:basis-1/3 flex flex-1 px-1",children:[e.jsxs("label",{className:"underline font-semibold",children:[e.jsx("span",{className:"text-red-600 font-semibold",children:" (*)"})," Số QĐ kỉ luật: "]}),e.jsx("input",{...a("soQD",{required:!0}),type:"text",className:`outline-none my-4 border rounded-md p-2 border-neutral-600\r
                  focus:ring-2 focus:border-blue-400`})]}),e.jsxs("div",{className:"flex-col md:basis-1/3 flex flex-1 px-1",children:[e.jsxs("label",{className:"underline font-semibold",children:[e.jsx("span",{className:"text-red-600 font-semibold",children:" (*)"})," Ngày ký: "]}),e.jsx("input",{...a("ngayky",{required:!0}),type:"date",className:`outline-none my-4 border rounded-md p-2 border-neutral-600\r
                  focus:ring-2 focus:border-blue-400`})]}),e.jsxs("div",{className:"flex-col md:basis-1/3 flex flex-1 px-1",children:[e.jsxs("label",{className:"underline font-semibold",children:[e.jsx("span",{className:"text-red-600 font-semibold",children:" (*)"})," Người ký: "]}),e.jsx("input",{...a("nguoiky",{required:!0}),type:"text",className:`outline-none my-4 border rounded-md p-2 border-neutral-600\r
                  focus:ring-2 focus:border-blue-400`})]}),e.jsxs("div",{className:"flex-col md:basis-full flex flex-1 px-1",children:[e.jsxs("label",{className:"underline font-semibold",children:[e.jsx("span",{className:"text-red-600 font-semibold",children:" (*)"})," Nội dung kỉ luật: "]}),e.jsx("input",{...a("noidung",{required:!0}),type:"text",className:`outline-none my-4 border rounded-md p-2 border-neutral-600\r
                  focus:ring-2 focus:border-blue-400`})]}),e.jsxs("div",{className:"flex-col md:basis-full flex flex-1 px-1",children:[e.jsxs("label",{className:"underline font-semibold",children:[e.jsx("span",{className:"text-red-600 font-semibold",children:" (*)"})," Hình thức kỉ luật: "]}),e.jsx(F,{control:g,name:"hinhthuc",render:({field:j})=>e.jsx(W,{options:[{label:"Khiển trách",value:"Khiển trách"},{label:"Cảnh cáo",value:"Cảnh cáo"},{label:"Hạ cấp bậc hàm",value:"Hạ cấp bậc hàm"},{label:"Tước quân tịch CAND",value:"Tước quân tịch CAND"}],className:"basic-multi-select my-4 p-1",classNamePrefix:"select",placeholder:"Vui lòng chọn hình thức",required:!0,...j})})]}),e.jsx(re,{children:e.jsxs(C,{color:"primary",variant:"contained",type:"submit",style:{margin:"4px auto"},children:[e.jsx(V,{}),e.jsx("span",{children:"Lưu dữ liệu"})]})})]})})})})]})})}const Ie=({row:l,onHandleChoiceCanbo:s,page:o,rowsPerPage:t,index:a})=>{x.useState(null);const d=H(g=>g.authReducer.roles_quanlydoanvien);return e.jsxs(w,{children:[e.jsx(n,{className:"border-r border-slate-300",align:"left",style:{fontWeight:"bold"},children:o*t+a}),e.jsx(n,{className:"border-r border-slate-300",align:"left",style:{fontWeight:"bold"},children:l.hoten}),e.jsx(n,{className:"border-r border-slate-300",align:"left",children:T(l.ngaysinh).format("DD/MM/YYYY")}),e.jsx(n,{className:"border-r border-slate-300",align:"left",children:l.bachamPopulate[0].bacham}),e.jsx(n,{className:"border-r border-slate-300",align:"left",children:l.chucvuPopulate[0].chucvu}),e.jsx(n,{className:"border-r border-slate-300",align:"left",children:e.jsx("p",{className:"truncate",children:l.doiPopulate[0].tendoi})}),e.jsx(n,{className:"border-r border-slate-300",align:"left",children:e.jsx("p",{className:"truncate",children:l.donviPopulate[0].tendonvi})}),e.jsx(n,{className:"border-r border-slate-300",align:"left",children:l.dangvien===!0?"Đảng viên":""}),e.jsx(n,{className:"border-r border-slate-300",align:"left",children:e.jsx("p",{className:"truncate",children:l.quequan})}),e.jsx(n,{className:"border-r border-slate-300",align:"left",children:l.gioitinh}),e.jsx(n,{className:"border-r border-slate-300",align:"left",children:l.CCCD}),e.jsx(n,{className:"border-r border-slate-300",align:"left",children:l.sohieuCAND}),e.jsx(n,{className:"border-r border-slate-300",align:"left",children:l.ngayvaodang!==""?T(l.ngayvaodang).format("DD/MM/YYYY"):""}),e.jsx(n,{className:"border-r border-slate-300",align:"left",children:l.trinhdo}),e.jsx(n,{className:"border-r border-slate-300",align:"left",children:l.lyluanchinhtri}),e.jsx(n,{className:"border-r border-slate-300",align:"left",children:T(l.bacham.tungay).format("DD/MM/YYYY")}),e.jsx(n,{className:"border-r border-slate-300",align:"left",children:T(l.chucvu.tungay).format("DD/MM/YYYY")}),e.jsx(n,{className:"border-r border-slate-300",align:"left",children:T(l.donvi.tungay).format("DD/MM/YYYY")}),e.jsx(n,{className:"border-r border-slate-300",align:"left"}),e.jsx(n,{align:"right",className:"bg-gray-300 flex justify-center items-center space-x-1",style:{position:"absolute",right:"40px",height:"53px",width:"300px",display:"flex",flexDirection:"unset"},children:d&&d.includes("xem khen thưởng, kỉ luật")&&e.jsxs(C,{variant:"contained",color:"success",size:"small",onClick:()=>s(l),children:[e.jsx(Z,{style:{fontSize:"20px"}}),"Kỉ luật cá nhân"]})})]},l._id)};function me(l){const s=xe(),{count:o,page:t,rowsPerPage:a,onPageChange:d}=l,g=c=>{d(c,0)},b=c=>{d(c,t-1)},m=c=>{d(c,t+1)},y=c=>{d(c,Math.max(0,Math.ceil(o/a)-1))};return e.jsxs(A,{sx:{flexShrink:0,ml:2.5},children:[e.jsx(N,{onClick:g,disabled:t===0,"aria-label":"first page",children:s.direction==="rtl"?e.jsx($,{}):e.jsx(B,{})}),e.jsx(N,{onClick:b,disabled:t===0,"aria-label":"previous page",children:s.direction==="rtl"?e.jsx(K,{}):e.jsx(Q,{})}),e.jsx(N,{onClick:m,disabled:t>=Math.ceil(o/a)-1,"aria-label":"next page",children:s.direction==="rtl"?e.jsx(Q,{}):e.jsx(K,{})}),e.jsx(N,{onClick:y,disabled:t>=Math.ceil(o/a)-1,"aria-label":"last page",children:s.direction==="rtl"?e.jsx(B,{}):e.jsx($,{})})]})}me.propTypes={count:v.number.isRequired,onPageChange:v.func.isRequired,page:v.number.isRequired,rowsPerPage:v.number.isRequired};function Xe({list:l,onClickOpenDialogEdit:s,onHandleChoiceCanbo:o}){const[t,a]=x.useState(0),[d,g]=x.useState(10),b=t>0?Math.max(0,(1+t)*d-l.length):0,m=(c,i)=>{a(i)},y=c=>{g(parseInt(c.target.value,10)),a(0)};return e.jsxs(e.Fragment,{children:[e.jsx(ie,{component:oe,style:{overflowX:"scroll"},children:e.jsxs(de,{"aria-label":"custom pagination table",children:[e.jsx(ce,{children:e.jsxs(w,{children:[e.jsx(n,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"rgb(30, 41, 59 )"},children:"#"}),e.jsx(n,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"rgb(30, 41, 59 )",minWidth:"250px"},children:"Họ tên"}),e.jsx(n,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"rgb(30, 41, 59 )",minWidth:"120px"},children:"Ngày sinh"}),e.jsx(n,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"rgb(30, 41, 59 )",minWidth:"120px"},children:"Bậc hàm"}),e.jsx(n,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"rgb(30, 41, 59 )",minWidth:"300px"},children:"Chức vụ"}),e.jsx(n,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"rgb(30, 41, 59 )",minWidth:"300px"},children:"Đội, công an xã"}),e.jsx(n,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"rgb(30, 41, 59 )",minWidth:"300px"},children:"Đơn vị công tác"}),e.jsx(n,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"rgb(30, 41, 59 )",minWidth:"100px"},children:"Đảng viên"}),e.jsx(n,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"rgb(30, 41, 59 )",minWidth:"300px"},children:"Quê quán"}),e.jsx(n,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"rgb(30, 41, 59 )",minWidth:"100px"},children:"Giới tính"}),e.jsx(n,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"rgb(30, 41, 59 )",minWidth:"150px"},children:"Số CCCD"}),e.jsx(n,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"rgb(30, 41, 59 )",minWidth:"120px"},children:"Số hiệu CAND"}),e.jsx(n,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"rgb(30, 41, 59 )",minWidth:"150px"},children:"Ngày vào đảng"}),e.jsx(n,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"rgb(30, 41, 59 )",minWidth:"150px"},children:"Trình độ học vấn"}),e.jsx(n,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"rgb(30, 41, 59 )",minWidth:"150px"},children:"Lý luận chính trị"}),e.jsx(n,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"rgb(30, 41, 59 )",minWidth:"150px"},children:"Ngày lên hàm"}),e.jsx(n,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"rgb(30, 41, 59 )",minWidth:"150px"},children:"Ngày giữ chức vụ"}),e.jsx(n,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"rgb(30, 41, 59 )",minWidth:"250px"},children:"Ngày nhận công tác về đơn vị"}),e.jsx(n,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"rgb(30, 41, 59 )",minWidth:"300px"}}),e.jsx(n,{align:"center",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"rgb(64, 64, 64)",minWidth:"300px",position:"absolute",right:"40px"},children:"Thao tác"})]})}),e.jsxs(ue,{children:[(d>0?l.slice(t*d,t*d+d):l).map((c,i)=>e.jsx(Ie,{row:c,page:t,rowsPerPage:d,index:i+1,onHandleChoiceCanbo:o},c._id)),b>0&&e.jsx(w,{style:{height:53*b},children:e.jsx(n,{colSpan:6})})]})]})}),e.jsx("div",{children:e.jsx(he,{rowsPerPageOptions:[10,25,50,100,{label:"Tất cả",value:-1}],count:l.length,rowsPerPage:d,page:t,SelectProps:{inputProps:{"aria-label":"rows per page"},native:!0},component:"div",onPageChange:m,onRowsPerPageChange:y,ActionsComponent:me,labelRowsPerPage:"Số cán bộ hiển thị trên mỗi trang",labelDisplayedRows:function({from:i,to:j,count:k}){return`hiển thị ${i} đến ${j} cán bộ trong tổng số ${k!==-1?k:`more than ${j}`} cán bộ`}})})]})}let Ge=[{label:"STT",key:"stt"},{label:"Số quyết định",key:"soQD"},{label:"Hình thức",key:"hinhthuc"},{label:"Người ký",key:"nguoiky"},{label:"Ngày ký",key:"ngayky"},{label:"Nội dung khen",key:"noidung"}];const bl=()=>{const[l,s]=x.useState([]),[o,t]=x.useState(!1),[a,d]=x.useState(null);let[g,b]=x.useState([]);const[m,y]=x.useState({hoten:"",donvi:"",sohieuCAND:""}),[c,i]=Re(),[j,k]=x.useState([]),[pe,L]=x.useState([]),[I,X]=x.useState({status:!1}),be=r=>{X({status:!0})},je=()=>{X({...I,status:!1})},[M,G]=x.useState({status:!1,item:null}),[D,_]=x.useState({status:!1,id_Delete:null}),ye=r=>{G({item:r,status:!0})},ke=()=>{G({...M,status:!1})},Ne=()=>{_({...D,status:!1})},Ce=()=>{_({...D,status:!1})},ve=r=>{_({status:!0,id_Delete:r})},{register:z,handleSubmit:De,control:Se,resetField:Je,setValue:Ue,watch:J,formState:{errors:Ze}}=E({defaultValues:{hinhthuc:{label:"Tất cả",value:""}}}),Pe=async r=>{let f={...r,hinhthuc:r.hinhthuc.value};try{i(!0);let u=await P.searchKiluatcanhans(a._id,f);s(u.data),b(u.data.map((h,p)=>({stt:p+1,soQD:h.soQD,ngayky:h.ngayky,noidung:h.noidung,nguoiky:h.nguoiky,hinhthuc:h.hinhthuc,capkhen:h.capkhen}))),setTimeout(()=>{i(!1)},400)}catch(u){console.log(u.message)}};x.useEffect(()=>{(async()=>{try{i(!0);let f=await Y.fetchDangvienList(m),u=await Y.getDataForAddPerson(),h=[{label:"Tất cả",value:""}].concat(u.data.donvis.map(p=>({value:p._id,label:p.tendonvi})));k(h),L(f.data),setTimeout(()=>{i(!1)},400)}catch(f){console.log(f.message)}})()},[]),x.useEffect(()=>{a&&(async()=>{try{i(!0);let f=await P.getKiluatcanhans(a._id);s(f.data),b(f.data.map((u,h)=>({stt:h+1,soQD:u.soQD,ngayky:u.ngayky,noidung:u.noidung,nguoiky:u.nguoiky,hinhthuc:u.hinhthuc}))),setTimeout(()=>{i(!1)},400)}catch(f){console.log(f.message)}})()},[a]);const Te=async r=>{r.preventDefault();try{i(!0);let f=await Y.fetchDangvienList(m);i(!1),L(f.data)}catch(f){console.log(f.message)}},we=r=>{d(r)},_e=async r=>{let f={...r,id:a._id};try{i(!0);let u=await P.addKiluatcanhan(f),h=await P.getKiluatcanhans(a._id);s(h.data),b(h.data.map((p,O)=>({stt:O+1,soQD:p.soQD,ngayky:p.ngayky,noidung:p.noidung,hinhthuc:p.hinhthuc,nguoiky:p.nguoiky}))),i(!1),S.success(u.data.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"})}catch(u){S.error(u.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}),i(!1)}},ze=async()=>{i(!0);try{let r=await P.deleteKiluatcanhan(D.id_Delete),u=[...l].filter(h=>h._id.toString()!==D.id_Delete);s(u),b(u.map((h,p)=>({stt:p+1,soQD:h.soQD,ngayky:h.ngayky,nguoiky:h.nguoiky,noidung:h.noidung,hinhthuc:h.hinhthuc}))),setTimeout(()=>{i(!1)},400),_({...D,status:!1}),S.success(r.data.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"})}catch(r){_({...D,status:!1}),S.error(r.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}),i(!1)}},qe=async r=>{try{i(!0);let f=await P.editKiluatcanhan(r),u=[...l],h=l.findIndex(p=>p._id.toString()===r.id_edit);u[h].soQD=r.soQD,u[h].ngayky=r.ngayky,u[h].hinhthuc=r.hinhthuc.value,u[h].nguoiky=r.nguoiky,u[h].noidung=r.noidung,s(u),b(u.map((p,O)=>({stt:O+1,soQD:p.soQD,ngayky:p.ngayky,noidung:p.noidung,hinhthuc:p.hinhthuc,nguoiky:p.nguoiky}))),i(!1),S.success(f.data.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"})}catch(f){S.error(f.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}),i(!1)}},U=H(r=>r.authReducer.roles_quanlydoanvien);return e.jsxs("div",{className:"pr-2","data-aos":"fade-left","data-aos-once":"true",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(We,{color:"primary",fontSize:"large"}),e.jsxs("h4",{className:"font-bold text-gray-800 text-lg",children:["Quản lý kỉ luật đối với cá nhân",a&&e.jsxs("span",{className:"ml-2 text-blue-600 italic underline underline-offset-4",children:[a==null?void 0:a.bachamPopulate[0].bacham," ",a==null?void 0:a.hoten," - ",a==null?void 0:a.chucvuPopulate[0].chucvu,", ",a==null?void 0:a.donviPopulate[0].tendonvi]})]})]}),e.jsxs("form",{onSubmit:r=>Te(r),className:"my-2 mt-4 p-4 rounded-lg shadow-xl",children:[e.jsxs("div",{className:"flex mb-4",children:[e.jsx(R,{}),e.jsx("h3",{className:"font-semibold",children:"Tìm kiếm đoàn viên"})]}),e.jsxs("div",{className:"flex flex-wrap xl:flex-row flex-col flex-1 bg-slate-300 p-2 rounded-md",children:[e.jsxs("div",{className:"flex-col flex md:basis-1/3 flex-1 px-1",children:[e.jsx("label",{className:"underline font-semibold",children:"Họ và tên: "}),e.jsx("input",{onChange:r=>y({...m,hoten:r.target.value}),type:"text",className:`outline-none my-4 border rounded-md p-2 border-neutral-600\r
                  focus:ring-2 focus:border-blue-400`})]}),e.jsxs("div",{className:"flex-col flex md:basis-1/3 flex-1 px-1",children:[e.jsx("label",{className:"underline font-semibold",children:" Số hiệu CAND: "}),e.jsx("input",{onChange:r=>y({...m,sohieuCAND:r.target.value}),type:"text",className:`outline-none my-4 border rounded-md p-2 border-neutral-600\r
                  focus:ring-2 focus:border-blue-400`})]}),e.jsxs("div",{className:"flex-col flex flex-1 md:basis-1/3 px-1",children:[e.jsx("label",{className:"underline font-semibold",children:"Đơn vị công tác:"}),e.jsx(W,{options:j,className:"basic-multi-select my-4 p-1",classNamePrefix:"select",placeholder:"Tất cả",onChange:r=>y({...m,donvi:r.value})})]})]}),e.jsx("div",{className:"my-2 text-center",children:e.jsxs(C,{sx:{width:"200px",backgroundColor:"slategray"},type:"submit",color:"info",variant:"contained",children:[e.jsx(R,{})," Tìm kiếm"]})})]}),e.jsx("div",{className:"mt-6 mx-8",children:e.jsx(Xe,{list:pe,onHandleChoiceCanbo:we})}),a&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mt-4 text-end md:space-x-2 space-y-2 md:space-y-0 md:block flex flex-col items-center",children:[U&&U.includes("thêm khen thưởng, kỉ luật")&&e.jsxs(C,{type:"submit",sx:{width:"350px",backgroundColor:"gray"},onClick:()=>be(),color:"primary",variant:"contained",children:[e.jsx(V,{})," Thêm mới kỉ luật"]}),e.jsxs(C,{sx:{width:"300px",backgroundColor:"darkgray"},onClick:()=>t(!0),color:"info",variant:"contained",children:[e.jsx(R,{})," Chức năng tìm kiếm nâng cao"]}),e.jsx(N,{children:e.jsx(Qe,{data:g,headers:Ge,filename:`danhsachkiluat_${a==null?void 0:a.hoten}_${J("tungay")}_${J("denngay")}`,children:e.jsxs("div",{className:"flex items-center shadow-md space-x-2 bg-green-300 px-2 py-1 rounded-md",children:[e.jsx(Ae,{}),e.jsx("span",{className:"text-sm text-green-800",children:"Xuất file excel"})]})})})]}),o&&e.jsxs("form",{onSubmit:De(Pe),className:"my-2 mt-4 mx-8 bg-slate-100 p-4 rounded-lg shadow-xl","data-aos":"zoom-in-down","data-aos-once":"true",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("h5",{className:"text-[18px] font-semibold",children:"Tìm kiếm nâng cao"}),e.jsx(N,{onClick:()=>t(!1),sx:{backgroundColor:"#333"},children:e.jsx($e,{sx:{color:"white"}})})]}),e.jsxs("div",{className:"flex flex-wrap xl:flex-row flex-col flex-1 p-2",children:[e.jsxs("div",{className:"flex-col md:basis-1/3 flex flex-1 px-1",children:[e.jsx("label",{className:"underline font-semibold",children:"Số QĐ kỉ luật: "}),e.jsx("input",{...z("soQD"),type:"text",className:`outline-none my-4 border rounded-md p-2 border-neutral-600\r
                    focus:ring-2 focus:border-blue-400`})]}),e.jsxs("div",{className:"flex-col md:basis-1/6 flex flex-1 px-1",children:[e.jsx("label",{className:"underline font-semibold",children:"Từ ngày: "}),e.jsx("input",{...z("tungay"),type:"date",className:`outline-none my-4 border rounded-md p-2 border-neutral-600\r
                  focus:ring-2 focus:border-blue-400`})]}),e.jsxs("div",{className:"flex-col md:basis-1/6 flex flex-1 px-1",children:[e.jsx("label",{className:"underline font-semibold",children:"Đến ngày: "}),e.jsx("input",{...z("denngay"),type:"date",className:`outline-none my-4 border rounded-md p-2 border-neutral-600\r
                  focus:ring-2 focus:border-blue-400`})]}),e.jsxs("div",{className:"flex-col md:basis-1/3 flex flex-1 px-1",children:[e.jsx("label",{className:"underline font-semibold",children:"Người ký: "}),e.jsx("input",{...z("nguoiky"),type:"text",className:`outline-none my-4 border rounded-md p-2 border-neutral-600\r
                  focus:ring-2 focus:border-blue-400`})]}),e.jsxs("div",{className:"flex-col md:basis-full flex flex-1 px-1",children:[e.jsx("label",{className:"underline font-semibold",children:"Nội dung kỉ luật: "}),e.jsx("input",{...z("noidung"),type:"text",className:`outline-none my-4 border rounded-md p-2 border-neutral-600\r
                  focus:ring-2 focus:border-blue-400`})]}),e.jsxs("div",{className:"flex-col flex flex-1 px-1",children:[e.jsx("label",{className:"underline font-semibold",children:"Hình thức kỉ luật: "}),e.jsx(F,{control:Se,name:"hinhthuc",render:({field:r})=>e.jsx(W,{options:[{label:"Tất cả",value:""},{label:"Khiển trách",value:"Khiển trách"},{label:"Cảnh cáo",value:"Cảnh cáo"},{label:"Hạ cấp bậc hàm",value:"Hạ cấp bậc hàm"},{label:"Tước quân tịch CAND",value:"Tước quân tịch CAND"}],className:"basic-multi-select my-4 p-1",classNamePrefix:"select",placeholder:"Vui lòng chọn hình thức",...r})})]})]}),e.jsx("div",{className:"my-2 text-center",children:e.jsxs(C,{sx:{width:"200px",backgroundColor:"slategray"},type:"submit",color:"info",variant:"contained",children:[e.jsx(R,{})," Tìm kiếm"]})})]})]}),a&&e.jsxs("div",{className:"mt-6 mx-8","data-aos":"zoom-in-up","data-aos-once":"true",children:[e.jsx("h3",{className:"text-center my-4 text-xl",children:"Danh sách kết quả kỉ luật đối với cá nhân"}),e.jsx(Oe,{list:l,onClickOpenDialogDelete:ve,onClickOpenDialogEdit:ye})]}),e.jsx(Ee,{open:I.status,onSubmit:_e,onCloseDialogAdd:je}),e.jsx(Le,{open:M.status,item:M.item,onSubmit:qe,onCloseDialogEdit:ke}),e.jsx(Ke,{open:D.status,onCloseDialogDelete:Ce,onConfirmDelete:ze,onCancelDelete:Ne})]})};export{bl as default};
