import{r as g,j as e,d as B,u as M,m as V,Q as v}from"./index-2b00a054.js";import{d as W}from"./GridView-85d728d6.js";import"./index.esm-a80e06b2.js";import{u as R}from"./index.esm-322da860.js";import{d as $}from"./Add-84462153.js";import{S as A,D as I,a as Q,h as K,d as G,b as J,c as U,f as X,g as Y,e as Z}from"./DialogDelete-f919c647.js";import{I as C,a as E,c as N,d as f,e as y,f as ee,P as se,h as te,i as ae,j as le,k as re,u as oe,l as T,m as w,n as O,o as _}from"./LastPage-e02fc572.js";import{B as D}from"./Button-c283a03a.js";import{s as ne}from"./ButtonBase-ca61bcf9.js";import{c as P}from"./chucvuApi-d5c3a3e9.js";import"./createSvgIcon-46c59fe3.js";const ie=g.forwardRef(function(t,i){return e.jsx(A,{direction:"up",ref:i,...t})}),ce=ne(C)({position:"absolute",right:"16px",top:"4px"});function de({open:l,item:t,onCloseDialogEdit:i,onSubmit:s}){const{register:o,handleSubmit:a,control:d,resetField:x,setValue:c,watch:u,formState:{errors:r}}=R({defaultValues:{chucvu:"",thutu:1}});g.useState([]),g.useEffect(()=>{t&&(c("chucvu",t.chucvu,{shouldValidate:!0}),c("thutu",t.thutu,{shouldValidate:!0}))},[t]);const m=async b=>{if(s){const h={...b,id_edit:t._id};await s(h),i()}};return e.jsx(e.Fragment,{children:e.jsxs(I,{maxWidth:"lg",fullWidth:!0,disableEscapeKeyDown:!0,onClose:(b,h)=>{h!=="backdropClick"&&i(b,h)},open:l,TransitionComponent:ie,keepMounted:!0,"aria-describedby":"alert-dialog-slide-description",children:[e.jsxs(Q,{style:{display:"flex",borderBottom:"1px solid #ccc",backgroundColor:"rgb(30, 41, 59 )",margin:"0px"},children:[e.jsx(K,{style:{color:"white",fontSize:"24px",marginRight:"8px"}}),e.jsx("span",{className:"text-white text-[18px]",children:"Chỉnh sửa chức vụ công tác"}),e.jsx(ce,{onClick:()=>i(),children:e.jsx(G,{style:{color:"white"}})})]}),e.jsx(J,{children:e.jsx(E,{children:e.jsxs("form",{className:"mt-2 mx-8",onSubmit:a(m),children:[e.jsxs("div",{className:"flex-col flex",children:[e.jsxs("label",{className:"underline font-semibold",children:[e.jsx("span",{className:"text-red-600 font-semibold",children:" (*)"})," Chức vụ: "]}),e.jsx("input",{...o("chucvu",{required:!0}),type:"text",className:`outline-none my-4 border rounded-md p-2 border-neutral-600\r
                  focus:ring-2 focus:border-blue-400`})]}),e.jsx("div",{className:"flex space-x-2",children:e.jsxs("div",{className:"flex-col flex",children:[e.jsxs("label",{className:"underline font-semibold",children:[e.jsx("span",{className:"text-red-600 font-semibold",children:" (*)"})," Thứ tự xuất hiện: "]}),e.jsx("input",{...o("thutu",{required:!0}),type:"number",className:`outline-none my-4 border rounded-md p-2 border-neutral-600\r
                  focus:ring-2 focus:border-blue-400`})]})}),e.jsx(U,{children:e.jsxs(D,{color:"primary",variant:"contained",type:"submit",style:{margin:"4px auto"},children:[e.jsx($,{}),e.jsx("span",{children:"Cập nhật"})]})})]})})})]})})}const ue=({row:l,page:t,rowsPerPage:i,index:s,onClickOpenDialogEdit:o,onClickOpenDialogDelete:a})=>{g.useState(null);const d=B(x=>x.authReducer.roles_quanlydoanvien);return e.jsxs(N,{className:"hover:bg-slate-200 transition duration-300",children:[e.jsx(f,{className:"border-r border-slate-300",align:"left",style:{fontWeight:"bold"},children:t*i+s}),e.jsx(f,{className:"border-r border-slate-300",align:"left",children:l.chucvu}),e.jsx(f,{className:"border-r border-slate-300",align:"left",children:l.thutu}),e.jsxs(f,{align:"right",className:"bg-gray-300 flex justify-center items-center space-x-1 hover:bg-slate-500 transition duration-300",style:{width:"180px"},children:[d&&d.includes("sửa chức vụ")&&e.jsx(D,{variant:"contained",color:"info",size:"small",onClick:()=>o(l),children:e.jsx(X,{style:{fontSize:"20px"}})}),d&&d.includes("xóa chức vụ")&&e.jsx(D,{variant:"contained",color:"error",size:"small",style:{marginLeft:"4px"},onClick:()=>a(l._id),children:e.jsx(Y,{style:{fontSize:"20px"}})})]})]},l._id)};function q(l){const t=oe(),{count:i,page:s,rowsPerPage:o,onPageChange:a}=l,d=r=>{a(r,0)},x=r=>{a(r,s-1)},c=r=>{a(r,s+1)},u=r=>{a(r,Math.max(0,Math.ceil(i/o)-1))};return e.jsxs(E,{sx:{flexShrink:0,ml:2.5},children:[e.jsx(C,{onClick:d,disabled:s===0,"aria-label":"first page",children:t.direction==="rtl"?e.jsx(T,{}):e.jsx(w,{})}),e.jsx(C,{onClick:x,disabled:s===0,"aria-label":"previous page",children:t.direction==="rtl"?e.jsx(O,{}):e.jsx(_,{})}),e.jsx(C,{onClick:c,disabled:s>=Math.ceil(i/o)-1,"aria-label":"next page",children:t.direction==="rtl"?e.jsx(_,{}):e.jsx(O,{})}),e.jsx(C,{onClick:u,disabled:s>=Math.ceil(i/o)-1,"aria-label":"last page",children:t.direction==="rtl"?e.jsx(w,{}):e.jsx(T,{})})]})}q.propTypes={count:y.number.isRequired,onPageChange:y.func.isRequired,page:y.number.isRequired,rowsPerPage:y.number.isRequired};function he({list:l,onClickOpenDialogEdit:t,onClickOpenDialogDelete:i}){const[s,o]=g.useState(0),[a,d]=g.useState(10),x=s>0?Math.max(0,(1+s)*a-l.length):0,c=(r,m)=>{o(m)},u=r=>{d(parseInt(r.target.value,10)),o(0)};return e.jsxs(e.Fragment,{children:[e.jsx(ee,{component:se,children:e.jsxs(te,{"aria-label":"custom pagination table",children:[e.jsx(ae,{children:e.jsxs(N,{children:[e.jsx(f,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"rgb(30, 41, 59 )"},children:"#"}),e.jsx(f,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"rgb(30, 41, 59 )"},children:"Chức vụ"}),e.jsx(f,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",minWidth:"100px",backgroundColor:"rgb(30, 41, 59 )"},children:"Thứ tự"}),e.jsx(f,{align:"center",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"rgb(30, 41, 59 )",maxWidth:"150px"},children:"Thao tác"})]})}),e.jsxs(le,{children:[(a>0?l.slice(s*a,s*a+a):l).map((r,m)=>e.jsx(ue,{row:r,page:s,rowsPerPage:a,index:m+1,onClickOpenDialogEdit:t,onClickOpenDialogDelete:i},r._id)),x>0&&e.jsx(N,{style:{height:53*x},children:e.jsx(f,{colSpan:6})})]})]})}),e.jsx("div",{children:e.jsx(re,{rowsPerPageOptions:[10,25,50,100,{label:"Tất cả",value:-1}],count:l.length,rowsPerPage:a,page:s,SelectProps:{inputProps:{"aria-label":"rows per page"},native:!0},component:"div",onPageChange:c,onRowsPerPageChange:u,ActionsComponent:q,labelRowsPerPage:"Số bản ghi hiển thị trên mỗi trang",labelDisplayedRows:function({from:m,to:b,count:h}){return`hiển thị ${m} đến ${b} bản ghi trong tổng số ${h!==-1?h:`more than ${b}`} bản ghi`}})})]})}const Se=()=>{const[l,t]=g.useState([]);M();const[i,s]=V(),[o,a]=g.useState({status:!1,item:null}),d=()=>{a({...o,status:!1})},x=n=>{a({item:n,status:!0})},[c,u]=g.useState({status:!1,id_Delete:null}),r=n=>{u({status:!0,id_Delete:n})},m=()=>{u({...c,status:!1})},b=()=>{u({...c,status:!1})},{register:h,handleSubmit:z,control:ge,resetField:k,watch:xe,formState:{errors:me}}=R({defaultValues:{chucvu:"",thutu:1}});g.useEffect(()=>{(async()=>{s(!0);try{let j=await P.getChucvus();t(j.data),setTimeout(()=>{s(!1)},400)}catch(j){console.log(j.message)}})()},[]);const F=async n=>{let j={...n};s(!0);try{let p=await P.addChucvu(j);t(p.data.chucvuList),setTimeout(()=>{s(!1)},400),k("chucvu"),k("thutu"),v.success(p.data.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"})}catch(p){v.error(p.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}),s(!1)}},H=async n=>{let j={...n};s(!0);try{let p=await P.editChucvu(j);t(p.data.chucvuList),setTimeout(()=>{s(!1)},400),v.success(p.data.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"})}catch(p){v.error(p.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}),s(!1)}},L=async()=>{s(!0);try{let n=await P.deleteChucvu(c.id_Delete);t(n.data.chucvuList),setTimeout(()=>{s(!1)},400),u({...c,status:!1}),v.success(n.data.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"})}catch(n){u({...c,status:!1}),v.error(n.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}),s(!1)}},S=B(n=>n.authReducer.roles_quanlydoanvien);return e.jsxs("div",{className:"pr-2","data-aos":"fade-left","data-aos-once":"true",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(W,{color:"primary",fontSize:"large"}),e.jsx("h4",{className:"font-bold text-gray-800 text-lg",children:"Quản lý chức vụ công tác"})]}),S&&S.includes("thêm chức vụ")&&e.jsxs("form",{className:"mt-2 mx-8",onSubmit:z(F),children:[e.jsxs("div",{className:"flex-col flex",children:[e.jsxs("label",{className:"underline font-semibold",children:[e.jsx("span",{className:"text-red-600 font-semibold",children:" (*)"})," Chức vụ: "]}),e.jsx("input",{...h("chucvu",{required:!0}),type:"text",className:`outline-none my-4 border rounded-md p-2 border-neutral-600\r
                  focus:ring-2 focus:border-blue-400`})]}),e.jsxs("div",{className:"flex-col flex md:basis-1/2",children:[e.jsxs("label",{className:"underline font-semibold",children:[e.jsx("span",{className:"text-red-600 font-semibold",children:" (*)"})," Thứ tự: "]}),e.jsx("input",{...h("thutu",{required:!0}),type:"number",className:`outline-none my-4 border rounded-md p-2 border-neutral-600\r
                  focus:ring-2 focus:border-blue-400`})]}),e.jsx("div",{className:"md:space-x-2 space-y-2 md:space-y-0 md:block flex flex-col items-center",children:e.jsxs(D,{type:"submit",sx:{width:"220px",backgroundColor:"gray"},color:"primary",variant:"contained",children:[e.jsx($,{})," Thêm mới"]})})]}),e.jsx("div",{className:"mt-6 mx-8",children:e.jsx(he,{list:l,onClickOpenDialogDelete:r,onClickOpenDialogEdit:x})}),e.jsx(de,{open:o.status,item:o.item,onCloseDialogEdit:d,onSubmit:H}),e.jsx(Z,{open:c.status,onCloseDialogDelete:b,onConfirmDelete:L,onCancelDelete:m})]})};export{Se as default};
